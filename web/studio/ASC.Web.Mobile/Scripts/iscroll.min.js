(function(){function f(o,q){var r=this,m=document,p;r.wrapper=typeof o=="object"?o:m.getElementById(o);r.wrapper.style.overflow="hidden";r.scroller=r.wrapper.children[0];r.scroller.style.cssText+="-webkit-transition-property:-webkit-transform;-webkit-transform-origin:0 0;-webkit-transform:"+n+"0,0"+l;r.scroller.style.cssText+="-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;";r.options={hScroll:true,vScroll:true,bounce:c,bounceLock:false,momentum:c,lockDirection:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:e,fadeScrollbar:(g&&c)||!d,hideScrollbar:g||!d,scrollbarClass:""};for(p in q){r.options[p]=q[p]}r.options.hScrollbar=r.options.hScroll&&r.options.hScrollbar;r.options.vScrollbar=r.options.vScroll&&r.options.vScrollbar;r.refresh();r._bind(j,window);r._bind(k)}f.prototype={x:0,y:0,handleEvent:function(m){var o=this;switch(m.type){case k:o._start(m);break;case i:o._move(m);break;case b:case a:o._end(m);break;case"webkitTransitionEnd":o._transitionEnd(m);break;case j:o._resize();break}},_scrollbar:function(o){var q=this,p=document,m;if(!q[o+"Scrollbar"]){if(q[o+"ScrollbarWrapper"]){q[o+"ScrollbarIndicator"].style.webkitTransform="";q[o+"ScrollbarWrapper"].parentNode.removeChild(q[o+"ScrollbarWrapper"]);q[o+"ScrollbarWrapper"]=null;q[o+"ScrollbarIndicator"]=null}return}if(!q[o+"ScrollbarWrapper"]){m=p.createElement("div");if(q.options.scrollbarClass){m.className=q.options.scrollbarClass+o.toUpperCase()}else{m.style.cssText="position:absolute;z-index:100;"+(o=="h"?"height:7px;bottom:1px;left:2px;right:7px":"width:7px;bottom:7px;top:2px;right:1px")}m.style.cssText+="pointer-events:none;-webkit-transition-property:opacity;-webkit-transition-duration:"+(q.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(q.options.hideScrollbar?"0":"1");q.wrapper.appendChild(m);q[o+"ScrollbarWrapper"]=m;m=p.createElement("div");if(!q.options.scrollbarClass){m.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-webkit-background-clip:padding-box;-webkit-box-sizing:border-box;"+(o=="h"?"height:100%;-webkit-border-radius:4px 3px;":"width:100%;-webkit-border-radius:3px 4px;")}m.style.cssText+="pointer-events:none;-webkit-transition-property:-webkit-transform;-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;-webkit-transform:"+n+"0,0"+l;q[o+"ScrollbarWrapper"].appendChild(m);q[o+"ScrollbarIndicator"]=m}if(o=="h"){q.hScrollbarSize=q.hScrollbarWrapper.clientWidth;q.hScrollbarIndicatorSize=h.max(h.round(q.hScrollbarSize*q.hScrollbarSize/q.scrollerW),8);q.hScrollbarIndicator.style.width=q.hScrollbarIndicatorSize+"px";q.hScrollbarMaxScroll=q.hScrollbarSize-q.hScrollbarIndicatorSize;q.hScrollbarProp=q.hScrollbarMaxScroll/q.maxScrollX}else{q.vScrollbarSize=q.vScrollbarWrapper.clientHeight;q.vScrollbarIndicatorSize=h.max(h.round(q.vScrollbarSize*q.vScrollbarSize/q.scrollerH),8);q.vScrollbarIndicator.style.height=q.vScrollbarIndicatorSize+"px";q.vScrollbarMaxScroll=q.vScrollbarSize-q.vScrollbarIndicatorSize;q.vScrollbarProp=q.vScrollbarMaxScroll/q.maxScrollY}q._indicatorPos(o,true)},_resize:function(){var m=this;setTimeout(function(){m.refresh()},0)},_pos:function(o,p){var m=this;m.x=m.hScroll?o:0;m.y=m.vScroll?p:0;m.scroller.style.webkitTransform=n+m.x+"px,"+m.y+"px"+l;m._indicatorPos("v")},_indicatorPos:function(m,o){var q=this,p=m=="h"?q.x:q.y;if(!q[m+"Scrollbar"]){return}p=q[m+"ScrollbarProp"]*p;if(p<0){p=q.options.fixedScrollbar?0:p+p*3;if(q[m+"ScrollbarIndicatorSize"]+p<9){p=-q[m+"ScrollbarIndicatorSize"]+8}}else{if(p>q[m+"ScrollbarMaxScroll"]){p=q.options.fixedScrollbar?q[m+"ScrollbarMaxScroll"]:p+(p-q[m+"ScrollbarMaxScroll"])*3;if(q[m+"ScrollbarIndicatorSize"]+q[m+"ScrollbarMaxScroll"]-p<9){p=q[m+"ScrollbarIndicatorSize"]+q[m+"ScrollbarMaxScroll"]-8}}}q[m+"ScrollbarWrapper"].style.webkitTransitionDelay="0";q[m+"ScrollbarWrapper"].style.opacity=o&&q.options.hideScrollbar?"0":"1";q[m+"ScrollbarIndicator"].style.webkitTransform=n+(m=="h"?p+"px,0":"0,"+p+"px")+l},_transitionTime:function(o){var m=this;o+="ms";m.scroller.style.webkitTransitionDuration=o;if(m.hScrollbar){m.hScrollbarIndicator.style.webkitTransitionDuration=o}if(m.vScrollbar){m.vScrollbarIndicator.style.webkitTransitionDuration=o}},_start:function(m){var q=this,p=d?m.changedTouches[0]:m,o;m.preventDefault();q.moved=false;q.distX=0;q.distY=0;q.absDistX=0;q.absDistY=0;q.dirX=0;q.dirY=0;q.returnTime=0;q._transitionTime(0);if(q.options.momentum){o=new WebKitCSSMatrix(window.getComputedStyle(q.scroller,null).webkitTransform);if(o.m41!=q.x||o.m42!=q.y){q._unbind("webkitTransitionEnd");q._pos(o.m41,o.m42)}}q.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";if(q.hScrollbar){q.hScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)"}if(q.vScrollbar){q.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)"}q.startX=q.x;q.startY=q.y;q.pointX=p.pageX;q.pointY=p.pageY;q.startTime=m.timeStamp;q._bind(i);q._bind(b);q._bind(a)},_move:function(p){if(d&&p.touches.length>1){return}var t=this,s=d?p.changedTouches[0]:p,m=s.pageX-t.pointX,o=s.pageY-t.pointY,q=t.x+m,r=t.y+o;p.preventDefault();t.pointX=s.pageX;t.pointY=s.pageY;if(q>0||q<t.maxScrollX){q=t.options.bounce?t.x+(m/2.4):q>=0||t.maxScrollX>=0?0:t.maxScrollX}if(r>0||r<t.maxScrollY){r=t.options.bounce?t.y+(o/2.4):r>=0||t.maxScrollY>=0?0:t.maxScrollY}if(g){t.moved=true}if(t.absDistX<4&&t.absDistY<4){t.distX+=m;t.distY+=o;t.absDistX=h.abs(t.distX);t.absDistY=h.abs(t.distY);return}if(t.options.lockDirection){if(t.absDistX>t.absDistY+3){r=t.y;o=0}else{if(t.absDistY>t.absDistX+3){q=t.x;m=0}}}t.moved=true;t._pos(q,r);t.dirX=m>0?-1:m<0?1:0;t.dirY=o>0?-1:o<0?1:0;if(p.timeStamp-t.startTime>300){t.startTime=p.timeStamp;t.startX=t.x;t.startY=t.y}},_end:function(o){if(d&&o.touches.length!=0){return}var x=this,v=d?o.changedTouches[0]:o,w,p,q={dist:0,time:0},r={dist:0,time:0},m=o.timeStamp-x.startTime,t=x.x,u=x.y,s;x._unbind(i);x._unbind(b);x._unbind(a);if(!x.moved){if(d){x.doubleTapTimer=null;w=v.target;while(w.nodeType!=1){w=w.parentNode}p=document.createEvent("MouseEvents");p.initMouseEvent("click",true,true,o.view,1,v.screenX,v.screenY,v.clientX,v.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,0,null);p._fake=true;w.dispatchEvent(p)}x._resetPos();return}if(m<300&&x.options.momentum){q=t?x._momentum(t-x.startX,m,-x.x,x.scrollerW-x.wrapperW+x.x,x.options.bounce?x.wrapperW:0):q;r=u?x._momentum(u-x.startY,m,-x.y,(x.maxScrollY<0?x.scrollerH-x.wrapperH+x.y:0),x.options.bounce?x.wrapperH:0):r;t=x.x+q.dist;u=x.y+r.dist;if((x.x>0&&t>0)||(x.x<x.maxScrollX&&t<x.maxScrollX)){q={dist:0,time:0}}if((x.y>0&&u>0)||(x.y<x.maxScrollY&&u<x.maxScrollY)){r={dist:0,time:0}}}if(q.dist||r.dist){s=h.max(h.max(q.time,r.time),10);x.scrollTo(t,u,s);return}x._resetPos(200)},_resetPos:function(q){var p=this,m=p.x,o=p.y;if(p.x>=0){m=0}else{if(p.x<p.maxScrollX){m=p.maxScrollX}}if(p.y>=0||p.maxScrollY>0){o=0}else{if(p.y<p.maxScrollY){o=p.maxScrollY}}if(m==p.x&&o==p.y){if(p.moved){p.moved=false}if(p.hScrollbar&&p.options.hideScrollbar){p.hScrollbarWrapper.style.webkitTransitionDelay="300ms";p.hScrollbarWrapper.style.opacity="0"}if(p.vScrollbar&&p.options.hideScrollbar){p.vScrollbarWrapper.style.webkitTransitionDelay="300ms";p.vScrollbarWrapper.style.opacity="0"}return}if(q){p.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)";if(p.hScrollbar){p.hScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)"}if(p.vScrollbar){p.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)"}}p.scrollTo(m,o,q||0)},_transitionEnd:function(m){var o=this;if(m){m.stopPropagation()}o._unbind("webkitTransitionEnd");o._resetPos(o.returnTime);o.returnTime=0},_momentum:function(o,x,q,p,u){var w=this,m=0.0006,v=h.abs(o)/x,r=(v*v)/(2*m),s=0,t=0;if(o>0&&r>q){t=u/(6/(r/v*m));q=q+t;w.returnTime=800/u*t+100;v=v*q/r;r=q}else{if(o<0&&r>p){t=u/(6/(r/v*m));p=p+t;w.returnTime=800/u*t+100;v=v*p/r;r=p}}r=r*(o<0?-1:1);s=v/m;return{dist:r,time:h.round(s)}},_offset:function(m,q){var o=-m.offsetLeft,p=-m.offsetTop;if(!q){return{x:o,y:p}}while(m=m.offsetParent){o-=m.offsetLeft;p-=m.offsetTop}return{x:o,y:p}},_bind:function(o,m){(m||this.scroller).addEventListener(o,this,false)},_unbind:function(o,m){(m||this.scroller).removeEventListener(o,this,false)},destroy:function(){var m=this;m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("v");m.scroller.style.webkitTransform="";m._unbind("webkitTransitionEnd");m._unbind(j);m._unbind(k);m._unbind(i);m._unbind(b);m._unbind(a)},refresh:function(){var m=this;m.wrapperW=m.wrapper.clientWidth;m.wrapperH=m.wrapper.clientHeight;m.scrollerW=m.scroller.offsetWidth;m.scrollerH=m.scroller.offsetHeight;m.maxScrollX=m.wrapperW-m.scrollerW;m.maxScrollY=m.wrapperH-m.scrollerH;m.dirX=0;m.dirY=0;m._transitionTime(0);m.hScroll=m.options.hScroll&&m.maxScrollX<0;m.vScroll=m.options.vScroll&&(!m.options.bounceLock&&!m.hScroll||m.scrollerH>m.wrapperH);m.hScrollbar=m.hScroll&&m.options.hScrollbar;m.vScrollbar=m.vScroll&&m.options.vScrollbar&&m.scrollerH>m.wrapperH;m._scrollbar("v");m._resetPos()},scrollTo:function(q,r,p,m){var o=this;if(m){q=o.x-q;r=o.y-r}p=!p||(h.round(o.x)==h.round(q)&&h.round(o.y)==h.round(r))?0:p;o.moved=true;if(p){o._bind("webkitTransitionEnd")}o._transitionTime(p);o._pos(q,r);if(!p){setTimeout(function(){o._transitionEnd()},0)}},scrollToElement:function(m,q){var p=this,o;m=m.nodeType?m:p.scroller.querySelector(m);if(!m){return}o=p._offset(m);o.x=o.x>0?0:o.x<p.maxScrollX?p.maxScrollX:o.x;o.y=o.y>0?0:o.y<p.maxScrollY?p.maxScrollY:o.y;q=q===undefined?h.max(h.abs(o.x)*2,h.abs(o.y)*2):q;p.scrollTo(o.x,o.y,q)}};var c="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),d="ontouchstart" in window,g=(/iphone|ipad/gi).test(navigator.appVersion),e=(/android/gi).test(navigator.appVersion),j="onorientationchange" in window?"orientationchange":"resize",k=d?"touchstart":"mousedown",i=d?"touchmove":"mousemove",b=d?"touchend":"mouseup",a=d?"touchcancel":"mouseup",n="translate"+(c?"3d(":"("),l=c?",0)":")",h=Math;if(typeof exports!=="undefined"){exports.iScroll=f}else{window.iScroll=f}})();