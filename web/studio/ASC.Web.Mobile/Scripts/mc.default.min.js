/*
(c) Copyright Ascensio System SIA 2010-2014

This program is a free software product.
You can redistribute it and/or modify it under the terms 
of the GNU Affero General Public License (AGPL) version 3 as published by the Free Software
Foundation. In accordance with Section 7(a) of the GNU AGPL its Section 15 shall be amended
to the effect that Ascensio System SIA expressly excludes the warranty of non-infringement of 
any third-party rights.

This program is distributed WITHOUT ANY WARRANTY; without even the implied warranty 
of MERCHANTABILITY or FITNESS FOR A PARTICULAR  PURPOSE. For details, see 
the GNU AGPL at: http://www.gnu.org/licenses/agpl-3.0.html

You can contact Ascensio System SIA at Lubanas st. 125a-25, Riga, Latvia, EU, LV-1021.

The  interactive user interfaces in modified source and object code versions of the Program must 
display Appropriate Legal Notices, as required under Section 5 of the GNU AGPL version 3.
 
Pursuant to Section 7(b) of the License you must retain the original Product logo when 
distributing the program. Pursuant to Section 7(e) we decline to grant you any rights under 
trademark law for use of our trademarks.
 
All the Product's GUI elements, including illustrations and icon sets, as well as technical writing
content are licensed under the terms of the Creative Commons Attribution-ShareAlike 4.0
International. See the License terms at http://creativecommons.org/licenses/by-sa/4.0/legalcode
*/

(function(a){var b=(function(){var f=navigator.userAgent,e=/android/i.test(f),g=(f.match(/.+(?:rv|it|ra|ie|ox|me|id|on|os)[\/:\s]([\d._]+)/i)||[0,"0"])[1].replace("_","");if(e){g=(f.match(/.+(?:rv|ra|ie|ox|me|id|os)[\/:\s]([\d._]+)/i)||[0,"0"])[1].replace("_","")}return{version:isFinite(parseFloat(g))?parseFloat(g):g,operamobile:/opera/i.test(f)&&/mobi/i.test(f),android:/android/i.test(f),ios:/iphone|ipad/i.test(f),ipod:/ipod/i.test(f),phonegap:!!window.PHONEGAP}})();a.extend(a,{platform:b});var c=(!("ontouchend" in document)||(a.platform.android&&a.platform.version>2.2&&!a.platform.operamobile))&&true;var d=("ontouchend" in document)&&a.platform.android&&a.platform.version<2.2;a.extend(a.support,{webapp:window.innerHeight===window.screen.availHeight,platform:b,orientation:"orientation" in window,touch:"ontouchend" in document,csstransitions:"WebKitTransitionEvent" in window,pushState:!!history.pushState,cssPositionFixed:!!c,iscroll:("ontouchend" in document)&&!c&&!!a.platform.ios&&true,fscroll:("ontouchend" in document)&&!c&&!!a.platform.android&&true,svg:!(a.browser.msie&&a.browser.version<9)&&!a.platform.operamobile&&!a.platform.android&&true,imgsvg:!a.browser.mozilla&&!(a.browser.msie&&a.browser.version<9)&&true,imganimated:!d,dataimage:!(a.browser.msie&&a.browser.version<9)&&true,fileupload:!!window.File&&!a.platform.ios&&!a.platform.operamobile&&!(a.platform.android&&a.platform.version<2.3)&&true,filereader:!!window.FileReader})})(jQuery);window.DefaultMobile=(function(a){var A={width:null,height:null},e=a(window),c=a(document),b=a(document.body),d=a("#bodyWrapper"),E="click",G=a.support.touch?"touchstart":"mousedown",H=a.support.touch?"touchend":"mouseup",F=a.support.touch?"touchmove":"mousemove";var f=function(J,M){J=typeof J==="string"?J:"";if(!J){return""}if(M===true){var K=[["&lt;","<"],["&gt;",">"],["&and;","\\^"],["&sim;","~"],["&amp;","&"]];var L=K.length;while(L--){J=J.replace(new RegExp(K[L][1],"g"),K[L][0])}return J}var I=document.createElement("textarea");I.innerHTML=J;return I.value};var D=function(){if(A.width===null&&Math.abs(window.orientation)===90){A.width=window.innerHeight}if(A.height===null&&Math.abs(window.orientation)!==90){A.height=window.innerHeight}};var C=(function(){if(a.platform.android){return function(){window.scrollTo(0,1)}}return function(){}})();var B=(function(){if(a.support.iscroll){return function(J,I){var L=J.find("div.ui-scroller:first").data("iScroll");if(L){var K=I.length>0?I[0].offsetTop-4:-1;if(K!==-1){L.scrollTop(0,-K,0)}}}}return function(J,I){window.scrollTo(0,Math.round(I.offset().top))}})();var g=(function(){if(a.support.touch){return function(){var J={height:a.support.webapp?window.innerHeight-4:window.screen.availHeight,width:a.support.webapp?window.innerHeight+4:window.screen.availWidth};var I=Math.abs(window.orientation)===90?J.width:J.height;a("#bodyWrapper").height(I)}}return function(){}})();var u=(function(){if(a.support.touch){return function(I){I=I&&typeof I==="object"?I:a("#bodyWrapper");var K={height:a.support.webapp?window.innerHeight-4:window.screen.availHeight-b.find("div.ui-header:first").height()+4,width:a.support.webapp?window.innerHeight+4:window.screen.availWidth-b.find("div.ui-header:first").height()+4};var J=Math.abs(window.orientation)===90?K.width-4:K.height+4;J=(Math.abs(window.orientation)===90?A.width:A.height)||J;I.find("div.ui-page-active:first").css("top",-document.documentElement.scrollTop+"px");I.height(J)}}return function(I){}})();var v=(function(){return function(I){I=I&&typeof I==="object"?I:a("div.ui-dialog.ui-dialog-active:first");var J=a("div.ui-page.ui-page-active:first");var K=J.height();I.height(K)}})();var x=(function(){if(a.support.touch){return function(I){I=I&&typeof I==="object"?I:a("div.ui-page.ui-change-page:first");var K={height:a.support.webapp?window.innerHeight-4:window.screen.availHeight-I.find("div.ui-header:first").height()+4,width:a.support.webapp?window.innerHeight+4:window.screen.availWidth-I.find("div.ui-header:first").height()+4};var J=Math.abs(window.orientation)===90?K.width-4:K.height+4;J=(Math.abs(window.orientation)===90?A.width:A.height)||J;if(I.removeClass("ui-resized-page").height("auto").height()<=J){I.height(J).addClass("ui-resized-page")}}}return function(I){}})();function k(I){a(a(I.target).parent()).after(a(I.target).parent().clone(true));a(I.target).after('<button class="delete-field"></button>');jQuery(document).trigger("updatepage");a(I.target).unbind()}var i=function(I){I.find("input.wke").bind("keypress",function(J){k(J)})};var m=(function(){if(a.support.imganimated){return function(I){}}return function(J){var M="",L=null,I=J.find('div.ui-item-content:first img[src$=".gif"]'),K=I.length;while(K--){L=I[K];M=L.src;if(M.indexOf("/images/smiley/")!==-1){L.src=M.replace(".gif",".png")}}}})();var o=function(I){I.find("select").each(function(){var M=a(this),J=M.parent("div.custom-select:first");var R=M.val(),P=R,K=M.find("option"),L=K.length;while(L--){if(K[L].value==R){P=K[L].innerHTML;break}}if(J.length===0){var N=document.createElement("div"),O=document.createElement("div"),Q=document.createElement("span");Q.className="inner-text";Q.appendChild(document.createTextNode(P));O.className="helper-container";O.appendChild(Q);N.className="custom-select";N.appendChild(O);J=a(N);M.before(N).appendTo(N).focus(function(){a(this).parent().addClass("focus")}).blur(function(){a(this).parent().removeClass("focus")}).change(function(){var U=a(this),W=U.val(),V=W,S=U.find("option"),T=S.length;while(T--){if(S[T].value==W){V=S[T].innerHTML;break}}U.parent().find("span.inner-text:first").text(f(V))})}J.attr("class","custom-select custom-select-"+M.attr("class"));M.parent().find("span.inner-text:first").text(f(P))})};var t=(function(){if(a.support.svg&&a.support.imgsvg){return function(I){}}if(a.support.svg&&!a.support.imgsvg){return function(J){var L=null,I=J.find('img[src$=".svg"]'),K=I.length;var M=null;while(K--){L=I[K];M=document.createElement("object");M.setAttribute("type","image/svg+xml");M.setAttribute("data",L.getAttribute("src"));M.className=L.className;L.parentNode.insertBefore(M,L);L.parentNode.removeChild(L)}}}return function(J){var L=null,I=J.find('img[src$=".svg"]'),K=I.length;while(K--){L=I[K];L.src=L.src.replace(".svg",".png")}}})();var n=(function(){if(a.support.dataimage){return function(J){var M=null,K=null,I=J.find("input.input-checkbox"),L=I.length;while(L--){K=I[L];if(K.className.indexOf("hidden-input")!==-1){continue}M=document.createElement("label");if(!K.id){K.id="checkbox-"+Math.floor(Math.random()*1000000)}M.className="custom-checkbox "+K.className+(K.checked?" checked":"");M.setAttribute("for",K.id);K.className+=" hidden-input";K.parentNode.insertBefore(M,K)}}}return function(I){}})();var z=(function(){if(a.support.touch){return function(I){}}return function(K){var L=K.find("iframe.file-container:first"),J=K.find("div.ui-header:first"),I=K.find("div.ui-footer:first");var M=document.documentElement.clientHeight>0?document.documentElement.clientHeight:document.body.clientHeight;L.height(M-J.outerHeight()-I.outerHeight()-4)}})();var h=function(J){var I=J.find("img.file-container:first");if(I.length>0){J.addClass("docitemfile-loading");I.load(function(){jQuery(this).parents("div.ui-page:first").removeClass("docitemfile-loading")})}};var y=(function(){if(a.support.iscroll){return function(){DefaultMobile.setScreenMetrics();var L=a("div.ui-page-active:first"),M=L.find("div.ui-scroller:first");if(M.length>0){setTimeout(DefaultMobile.scrollToTop,1);var I=L.find("div.ui-content:first"),K=L.find("div.ui-header:first"),J=L.find("div.ui-footer:first");var P={height:a.support.webapp?window.innerHeight-4:window.screen.availHeight-b.find("div.ui-header:first").height()+4,width:a.support.webapp?window.innerHeight+4:window.screen.availWidth-b.find("div.ui-header:first").height()+4};var N=Math.abs(window.orientation)===90?P.width-4:P.height+4;N=(Math.abs(window.orientation)===90?A.width:A.height)||N;L.addClass("ui-scroller").height(N);I.height(N-K.outerHeight()-J.outerHeight()+4);var O=M.data("iScroll");if(O){O.refresh()}}}}return function(){DefaultMobile.setScreenMetrics()}})();var w=function(J){var I=J.find("span.people-filter-item");var K=Math.floor(J.height()/I.length)*0.08;if(K){I.css("font-size",K+"em");J.height("auto").css("margin-top",-(J.height()>>1)+4+"px")}};var l=function(K,J){var I=a("#"+K).tmpl(J);return I};var q=function(M,L,N,K){var I=a(),J=a("#bodyWrapper");if(L){I=J.children("div.ui-dialog").filter('[data-dialogid="'+L+'"]:first')}if(I.length>0){switch(M){case"template-dialog-people":return I}I.remove()}if(!K.hasOwnProperty("title")){K.title=N}if(!K.hasOwnProperty("dialogtitle")){K.dialogtitle=N}K.title=K.title||ASC.Resources.PageTitle||document.title;K.dialogtitle=K.pagetitle||ASC.Resources.PageTitle||document.title;I=l(M,K).appendTo(J);if(L){I.attr("data-dialogid",L)}if(K.hasOwnProperty("item")&&K.item.hasOwnProperty("id")){I.attr("data-itemid",K.item.id)}if(K.hasOwnProperty("id")){I.attr("data-itemid",K.id)}return I};var s=function(M,L,N,K){var J=a(),I=a("#bodyWrapper");if(L){J=I.children("div.ui-page").filter('[data-pageid="'+L+'"]:first')}if(J.length>0){switch(M){case"template-page-people":return J}J.remove()}if(!K.hasOwnProperty("title")){K.title=N}if(!K.hasOwnProperty("pagetitle")){K.pagetitle=N}K.title=K.title||ASC.Resources.PageTitle||document.title;K.pagetitle=K.pagetitle||ASC.Resources.PageTitle||document.title;J=l(M,K).appendTo(I);if(L){J.attr("data-pageid",L)}if(K.hasOwnProperty("item")&&K.item&&K.item.hasOwnProperty("id")){J.attr("data-itemid",K.item.id)}if(K.hasOwnProperty("id")){J.attr("data-itemid",K.id)}return J};var p=function(P,O,L,M,K){var N="",R="",J=[],Q=null;switch(O.toLowerCase()){case"dialog-documents-additem":N=TeamlabMobile.templates.dgdocsadditem;L="pgdcs-additm-"+L;break;case"dialog-crm-additem":N=TeamlabMobile.templates.dgcrmadditem;L="pgcrm-additm-"+L;break;case"dialog-crm-navigate":N=TeamlabMobile.templates.dgcrmnavigate;L="pgcrm-navigate-"+L;break;case"dialog-crm-addtocontact":N=TeamlabMobile.templates.dgcrmaddtocontact;L="pgcrm-addtocontact-"+L;break;case"dialog-crm-additem-file":N=TeamlabMobile.templates.dgcrmaddfiletocontact;L="pgcrm-addtocontact-"+L;break;default:return a()}c.trigger("startrenderdialog");var I=q(N,L,M,K||{});I.addClass("ui-dialog-active");c.trigger("endrenderdialog",[I,P]);return I};var r=function(M,S,O,Q,K){var R="",P="",J=[],N=null;switch(S.toLowerCase()){case"page-auth":R=TeamlabMobile.templates.pgauth;O="pgauth-"+O;break;case"page-search":R=TeamlabMobile.templates.pgsearch;O="pgsch-"+O;break;case"page-default":R=TeamlabMobile.templates.pgdefault;O="pgdef-"+O;break;case"page-rewrite":R=TeamlabMobile.templates.pgrewrite;O="pgrwr-"+O;break;case"page-exception":R=TeamlabMobile.templates.pgexception;O="pgexc-"+O;break;case"page-community":R=TeamlabMobile.templates.pgcommunity;O="pgcom-"+O;break;case"page-community-blog":R=TeamlabMobile.templates.pgcommblog;O="pgcom-blg-"+O;break;case"page-community-poll":R=TeamlabMobile.templates.pgcommpoll;O="pgcom-pll-"+O;break;case"page-community-forum":R=TeamlabMobile.templates.pgcommforum;O="pgcom-frm-"+O;break;case"page-community-event":R=TeamlabMobile.templates.pgcommevent;O="pgcom-evt-"+O;break;case"page-community-bookmark":R=TeamlabMobile.templates.pgcommbookmark;O="pgcom-bkm-"+O;break;case"page-community-addblog":R=TeamlabMobile.templates.pgcommaddblog;O="pgcom-addblg-"+O;break;case"page-community-addpoll":R=TeamlabMobile.templates.pgcommaddpoll;O="pgcom-addblg-"+O;break;case"page-community-addforum":R=TeamlabMobile.templates.pgcommaddforum;O="pgcom-addblg-"+O;break;case"page-community-addevent":R=TeamlabMobile.templates.pgcommaddevent;O="pgcom-addblg-"+O;break;case"page-community-addbookmark":R=TeamlabMobile.templates.pgcommaddbookmark;O="pgcom-addblg-"+O;break;case"page-community-blogs":R=TeamlabMobile.templates.pgcommunity;O="pgcom-blgs-"+O;break;case"page-community-polls":R=TeamlabMobile.templates.pgcommunity;O="pgcom-plls-"+O;break;case"page-community-forums":R=TeamlabMobile.templates.pgcommunity;O="pgcom-frms-"+O;break;case"page-community-events":R=TeamlabMobile.templates.pgcommunity;O="pgcom-evts-"+O;break;case"page-community-bookmarks":R=TeamlabMobile.templates.pgcommunity;O="pgcom-bkms-"+O;break;case"page-community-addcomment":R=TeamlabMobile.templates.pgaddcomment;O="pgcom-addcm-"+O;break;case"page-people":R=TeamlabMobile.templates.pgpeople;O="pgppl-"+O;break;case"page-people-profile":R=TeamlabMobile.templates.pgpeopitem;O="pgppl-itm-"+O;break;case"page-projects":R=TeamlabMobile.templates.pgprojects;O="pgprj-"+O;break;case"page-projects-tasks":R=TeamlabMobile.templates.pgprojitems;O="pgprj-tsks-"+O;break;case"page-projects-milestones":R=TeamlabMobile.templates.pgprojitems;O="pgprj-mlts-"+O;break;case"page-projects-project":R=TeamlabMobile.templates.pgprojproject;O="pgprj-prj-"+O;break;case"page-projects-project-team":R=TeamlabMobile.templates.pgprojprojectteam;O="pgprj-ptm-"+O;break;case"page-projects-project-files":R=TeamlabMobile.templates.pgprojprojectfiles;O="pgprj-pfl-"+O;break;case"page-projects-project-tasks":R=TeamlabMobile.templates.pgprojprojecttasks;O="pgprj-pts-"+O;break;case"page-projects-project-milestones":R=TeamlabMobile.templates.pgprojprojectmilestones;O="pgprj-pms-"+O;break;case"page-projects-project-discussions":R=TeamlabMobile.templates.pgprojprojectdiscussions;O="pgprj-pds-"+O;break;case"page-projects-milestone-tasks":R=TeamlabMobile.templates.pgprojmilestonetasks;O="pgprj-mts-"+O;break;case"page-projects-task":R=TeamlabMobile.templates.pgprojtask;O="pgprj-tsk-"+O;break;case"page-projects-discussion":R=TeamlabMobile.templates.pgprojdiscussion;O="pgprj-dsc-"+O;break;case"page-projects-addtask":R=TeamlabMobile.templates.pgprojaddtask;O="pgprj-addtsk-"+O;break;case"page-projects-addmilestone":R=TeamlabMobile.templates.pgprojaddmilestone;O="pgprj-addmlt-"+O;break;case"page-projects-adddiscussion":R=TeamlabMobile.templates.pgprojadddiscussion;O="pgprj-adddsc-"+O;break;case"page-projects-addcomment":R=TeamlabMobile.templates.pgaddcomment;O="pgprj-addcm-"+O;break;case"page-documents":R=TeamlabMobile.templates.pgdocuments;O="pgdcs-"+O;break;case"page-documents-file":R=TeamlabMobile.templates.pgdocsfile;O="pgdcs-file-"+O;break;case"page-documents-additem":R=TeamlabMobile.templates.pgdocsadditem;O="pgdcs-additm-"+O;break;case"page-documents-addfile":R=TeamlabMobile.templates.pgdocsaddfile;O="pgdcs-addfle-"+O;break;case"page-documents-addfolder":R=TeamlabMobile.templates.pgdocsaddfolder;O="pgdcs-addfld-"+O;break;case"page-documents-adddocument":R=TeamlabMobile.templates.pgdocsadddocument;O="pgdcs-adddcm-"+O;break;case"page-documents-editdocument":R=TeamlabMobile.templates.pgdocseditdocument;O="pgdcs-edtdoc-"+O;break;case"page-crm":R=TeamlabMobile.templates.pgcrm;O="pgcrm-"+O;break;case"page-crm-tasks":R=TeamlabMobile.templates.pgcrmtasks;O="pgcrm-tasks"+O;break;case"page-crm-task":R=TeamlabMobile.templates.pgcrmtask;O="pgcrm-task"+O;break;case"page-crm-addtask":R=TeamlabMobile.templates.pgcrmaddtask;O="pgcrm-addtask"+O;break;case"page-crm-addcompany":R=TeamlabMobile.templates.pgcrmaddcompany;O="pgcrm-addcompany"+O;break;case"page-crm-addpersone":R=TeamlabMobile.templates.pgcrmaddpersone;O="pgcrm-addpersone"+O;break;case"page-crm-addhistoryevent":R=TeamlabMobile.templates.pgcrmaddhistoryevent;O="pgcrm-addhistoryevent"+O;break;case"page-crm-addnote":R=TeamlabMobile.templates.pgcrmaddnote;O="pgcrm-addnote"+O;break;case"page-crm-contacthistory":R=TeamlabMobile.templates.pgcrmcontacthistory;O="pgcrm-contacthistory"+O;break;case"page-crm-contactfiles":R=TeamlabMobile.templates.pgcrmcontactfiles;O="pgcrm-contactfiles"+O;break;case"page-crm-contactasks":R=TeamlabMobile.templates.pgcrmcontacttasks;O="pgcrm-contacttasks"+O;break;case"page-crm-contacpersones":R=TeamlabMobile.templates.pgcrmcontactpersones;O="pgcrm-contactpersones"+O;break;case"page-crm-person":R=TeamlabMobile.templates.pgcrmperson;O="pgcrm-prn"+O;break;case"page-crm-company":R=TeamlabMobile.templates.pgcrmcompany;O="pgcrm-cpn"+O;break;default:return a()}c.trigger("startrenderpage");var I=null;try{I=s(R,O,Q,K||{})}catch(L){I=null;console.log("renderPage error: ",L);b.removeClass("ui-mobile-rendering-page").addClass("ui-mobile-rendered-page")}if(I){d.children("div.ui-page.ui-page-active").not(I).removeClass("ui-page-active").addClass("last-active-page");I.addClass("ui-page-active");c.trigger("endrenderpage",[I,M])}return I||a()};var j=function(K,I,J){var L=J.attr("data-href");if(L){location.href=L}};return{constants:{screenMetrics:A,touchClick:E,touchStartEvent:G,touchStopEvent:H,touchMoveEvent:F},setScreenMetrics:D,scrollToTop:C,scrollToItem:B,defaultResizeBody:g,resizeBody:u,resizeDialog:v,resizePage:x,resizeViewer:z,resizeScroller:y,resizeFilterItems:w,keyDownOnWkeInput:i,hideLoadingImg:h,renderAnimatedImages:m,renderCustomSelects:o,renderVectorImages:t,renderCheckbox:n,renderDialog:p,renderPage:r,processTemplate:l,move_me:j}})(jQuery);(function(a){var m="",k=null,h=null,b=a(document.body),U=navigator.userAgent;b.addClass(a.support.touch?"plt-mobile":"plt-desktop");k={"engn-ios":/iphone|ipad/i.test(U),"engn-android":/android/i.test(U),"engn-gecko":/gecko/i.test(U)&&!/webkit/i.test(U),"engn-webkit":/webkit/i.test(U)};h={"brwr-msie":"\v"=="v"||/msie/i.test(U),"brwr-opera":!!window.opera,"brwr-chrome":!!window.chrome,"brwr-safari":/safari/i.test(U)&&!window.chrome,"brwr-firefox":/firefox/i.test(U)};for(m in k){if(k.hasOwnProperty(m)){if(k[m]){b.addClass(m)}}}for(m in h){if(h.hasOwnProperty(m)){if(h[m]){b.addClass(m);b.addClass(m+"-"+a.platform.version)}}}var g=a(window),c=a(document),b=a(document.body),d=a("#bodyWrapper"),f=a(),e=a(),V=0,l=299,T=0,S=null,n=0;if(!document.getElementsByClassName){document.getElementsByClassName=function(){return[]}}if(a.support.cssPositionFixed){a(document.body).addClass("support-position-fixed")}if(!a.support.iscroll&&!a.support.cssPositionFixed){a(document.body).addClass("unsupport-iscroll")}if(a.support.orientation){document.body.className+=" "+Math.abs(window.orientation)===90?" ui-landscape":" ui-portrait";if(document.addEventListener){window.addEventListener("orientationchange",function(Z){var aa="",W="",X=document.body.className;if(X){if(Math.abs(window.orientation)===90){aa="ui-portrait";W="ui-landscape"}else{aa="ui-landscape";W="ui-portrait"}X=X.split(/\s+/);var Y=X.length;while(Y--){if(X[Y]===aa){X.splice(Y,1)}}X.push(W);document.body.className=X.join(" ")}})}}if(a.support.touch){}function o(W){var Z=W,aa=[[/dddd/g,"dd"],[/ddd/g,"dd"],[/MMMM/g,"mm"],[/MMM/g,"mm"],[/M/g,"m"],[/yyyy/g,"yy"],[/yyy/g,"yy"]];for(var X=0,Y=aa.length;X<Y;X++){Z=Z.replace(aa[X][0],aa[X][1])}return Z;return W}var p=(function(){if(a.platform.operamobile){return function(){clearTimeout(n)}}return function(){clearTimeout(n);var W=Math.min(window.innerHeight,window.screen.availHeight);e.css("display","block").css("bottom","auto").css("top",Math.max(window.pageYOffset,window.scrollY)+W-(e[0].offsetHeight)+"px")}})();var P=(function(){if(a.support.fscroll){return function(){e.css("display","none");clearTimeout(n);n=setTimeout(p,500)}}return function(){}})();var R=function(W){g.unbind("scroll",P).unbind(DefaultMobile.constants.touchMoveEvent,P).unbind(DefaultMobile.constants.touchMoveEvent,P);if(W.length>0){g.bind("scroll",P).bind(DefaultMobile.constants.touchMoveEvent,P).bind(DefaultMobile.constants.touchMoveEvent,P)}};function y(ab,af,ac,X,ae){var Z=0,aa=null,ad=false;try{switch(ab.toLowerCase()){case"ongetblog":aa=ASC.Resources.ErrGetBlogException;break;case"ongetpoll":aa=ASC.Resources.ErrGetPollException;break;case"ongetforum":aa=ASC.Resources.ErrGetForumException;break;case"ongetevent":aa=ASC.Resources.ErrGetEventException;break;case"ongetbookmark":aa=ASC.Resources.ErrGetBookmarkException;break;case"onaddtask":aa=ASC.Resources.ErrAddTaskException;break;case"onaddcrmtask":aa=ASC.Resources.ErrAddTaskException;break;case"ongettask":aa=ASC.Resources.ErrGetTaskException;break;case"onaddmilestone":aa=ASC.Resources.ErrAddMilestoneException;break;case"onadddiscussion":aa=ASC.Resources.ErrAddDiscussionException;break;default:aa=ac;break}switch(af){case"403":aa=ASC.Resources.ErrAccessDeniedException;break;case"404":aa=ASC.Resources.ErrInvalidRequestException;break;case"500":aa=ASC.Resources.ErrUnknownException;break;case"503":aa=ASC.Resources.ErrUnknownException;break}}catch(Y){aa=ASC.Resources.ErrUnknownException}if(aa){if(navigator.onLine===false){aa=ASC.Resources.ErrNoInternetConnection||ASC.Resources.ErrInvalidRequestException;ASC.Controls.messages.show("noconnection","error",aa)}else{ASC.Controls.messages.show("error",aa)}g.scrollTop(0)}b.removeClass("ui-mobile-rendering-page").addClass("ui-mobile-rendered-page");var W=a("div.ui-page-active:first");W.removeClass("loading-items").removeClass("update-status").removeClass("docitemfile-loading").removeClass("projectteam-loading").removeClass("projectmilestones-loading");W.find("button").removeClass("disabled");W.find("li.active-item").removeClass("active-item");ASC.Controls.AnchorController.lazymove(null)}function r(X){var W=DefaultMobile.renderPage("auth-page","page-auth","auth","TeamLab",X)}function N(Y,aa,Z){var X=ASC.Controls.AnchorController.getAnchor();Y={pagetitle:ASC.Resources.LblSearchTitle,type:"search-page",query:aa,anchor:X,items:Y};var W=DefaultMobile.renderPage("search-page","page-search","search"+Math.floor(Math.random()*1000000),"TeamLab",Y)}function E(X){X.isapp=window.PHONEGAP;var W=DefaultMobile.renderPage("index-page","page-default","default","TeamLab",X)}function M(X){var W=DefaultMobile.renderPage("rewrite-page","page-rewrite","rewrite","TeamLab",X)}function q(Y,Z){var X=a("div.ui-page-active:first").removeClass("loading-comments");a("textarea.ui-text-area.comment-content").val("");a("button.create-comment").removeClass("disabled");DefaultMobile.resizePage(X);var W=X.find('li.item-comment[data-commentid="'+Y.id+'"]:first');if(W.length>0){setTimeout((function(aa){return function(){window.scrollTo(0,aa)}})(Math.round(W.offset().top)),100)}}function L(X){var W=60;this.style.height=W+"px";var Y=W,Z=this.scrollHeight-10;if(Z>Y){while(Z>Y){Y+=16}this.style.height=Y+"px"}}function w(W){switch(W.keyCode){case 13:if(W.ctrlKey===true){a(this).parents("div.ui-page:first").find("button.create-item:first").trigger("click")}break}}function x(W){switch(W.keyCode){case 13:a(this).parents("div.ui-page:first").find("button.create-item:first").trigger("click");break}}function F(Y){var X=null,W=a(this),Z="";Z=W.length>0?W.find("input.top-search-field:first").val():Z;if(typeof Z!=="string"||(Z=(Z.replace(/^\s+|\s+$/g,"")).toLowerCase()).length===0){return undefined}X=a("div.ui-page-active:first");if(Z){X.find("form.search-form:first").addClass("active")}else{X.find("form.search-form:first").removeClass("active")}TeamlabMobile.search(Z)}function G(X){var W=null,Y=X.target.value;W=a("div.ui-page-active:first");if(Y){W.find("form.search-form:first").addClass("active")}else{W.find("form.search-form:first").removeClass("active")}}function i(Z,ab,W){var aa="",Y=0,X=typeof Z==="string"?Z.split(/\s+/):[],Y=X?X.length:0;while(Y--){aa=X[Y].replace(/-/g,"_");if(typeof DefaultMobile[aa]==="function"){DefaultMobile[aa].apply(ab,W)}}}function z(X){try{console._print()}catch(W){}}function D(W){a(this).toggleClass("image-fullsize")}function I(Y){var W=a("div.ui-page-active:first"),X=a(this);if(W.length===0||X.hasClass("disabled")){return false}i(X.attr("class"),this,[Y,W,X]);if(X.hasClass("disable-search-label")){var W=a("div.ui-page-active:first");W.find("li.item-index").removeClass("uncorrect-item");W.find("li.item-persone").removeClass("uncorrect-item");W.find("form.search-form:first").removeClass("active").find("input.top-search-field:first").val("");window.focus()}}function O(Y){var W=a("div.ui-page-active:first"),X=a(this);if(W.length===0||X.hasClass("disabled")){return false}i(X.attr("class"),this,[Y,W,X])}function H(Y){var W=a("div.ui-page-active:first"),X=a(this);if(X.is(":checkbox")){if(W.length===0||X.hasClass("disabled")){return false}i(X.attr("class"),this,[Y,W,X]);var aa=X.attr("data-itemid");aa=isFinite(+aa)?+aa:null;if(aa!==null){var ab=null;if(W.hasClass("page-crm-tasks")||W.hasClass("page-crm-contacttasks")||W.hasClass("page-crm-task")){ab=((W.hasClass("page-crm-contacttasks")||W.hasClass("page-crm-tasks")||W.hasClass("page-crm-task"))&&"crm-tasks")||null}var Z=null,ac={};switch(ab){case"crm-tasks":if(W.attr("data-itemid")!=null||W.attr("data-itemid")!=""){ac.contactId=W.attr("data-itemid")}Z=TeamlabMobile.updateCrmTaskStatus;break}if(Z!==null){W.addClass("update-status");X.parents("li.item.:first").addClass("update-status");Z(ac,aa,X.is(":checked"));return false}}return false}}function u(Y){var W=a("div.ui-page-active:first"),X=a(this),aa=null,Z=false;if(W.length===0||X.hasClass("disabled")){return false}i(X.attr("class"),this,[Y,W,X]);return false}function t(Y){var W=a("div.ui-page-active:first"),X=a(this);if(W.length===0||X.hasClass("disabled")){return false}i(X.attr("class"),this,[Y,W,X])}function s(W){V++}function B(W){a(this).addClass("active");V=0;S=this;T=new Date().getTime()}function C(X){var W=a(this);W.removeClass("active");a(S).removeClass("active");if(S===this&&(((V<2)&&(new Date().getTime()-T<l))||(W.hasClass("ui-btn")||W.hasClass("nav-menu-item")))){return A.apply(this,[X])}}function K(X){if(typeof X.button==="number"&&X.button!==0){X.preventDefault();return false}var W=a(this);if(W.hasClass("target-blank")){var Y=this.getAttribute("href")||"";Y=Y.charAt(0)==="#"?Y.substring(1):Y;if(Y){window.open(Y)}X.preventDefault();return false}X.preventDefault();return false}function A(Z){var W=a("div.ui-page-active:first"),X=a(this);i(X.attr("class"),this,[Z,W,X]);if(typeof Z.button==="number"&&Z.button!==0){Z.preventDefault();return false}var Y=this.getAttribute("data-back"),X=a(this);Y=Y||null;if(X.hasClass("screenzoom")){return false}if(X.hasClass("target-none")){Z.preventDefault();return false}if(X.hasClass("ui-item-link")){X.parent().addClass("active-item")}if(X.hasClass("target-update")){Z.preventDefault();return false}if(X.hasClass("target-portals")){history.go(-(history.length-1));return undefined}if(X.hasClass("target-standart")){a.cookie("asc_nomobile","1",{path:"/"});var aa=this.getAttribute("href")||"";if(aa){location.href=aa}return undefined}if(X.hasClass("target-logout")){var aa=this.getAttribute("href")||"";if(aa){location.href=aa}return undefined}if(X.hasClass("target-back")){var ab=0;ab=window.scrollY;TeamlabMobile.goPrevHistoryStep(X.hasClass("none-shift-back"));window.scrollY=ab;Z.preventDefault();return false}if(X.hasClass("target-blank")){return undefined}if(X.hasClass("target-top")){var aa=this.getAttribute("href")||"";aa=aa.charAt(0)==="#"?aa.substring(1):aa;if(aa){if(!X.hasClass("change-page-none")){jQuery(document).trigger("changepage")}setTimeout((function(ac){return function(){location.href=ac}})(aa),100)}Z.preventDefault();return false}if(X.hasClass("target-dialog")){TeamlabMobile.showDialog(this.getAttribute("href"));Z.preventDefault();return false}ab=window.scrollY;var aa=this.getAttribute("href")||"";ASC.Controls.AnchorController.lazymove(Y?{__back:Y}:null,aa.length===0||aa==="/"?"#":aa);window.scrollY=ab;Z.preventDefault();return false}function J(X){var W=null;if(!(W=a(this).parents(".ui-menu-item:first")).hasClass("active-item")){W.addClass("active-item").siblings().removeClass("active-item")}}function v(W){setTimeout(function(){jQuery("div.ui-dialog-active").removeClass("ui-dialog-active")},300)}function j(W){a(document.body).unbind(DefaultMobile.constants.touchMoveEvent,s).bind(DefaultMobile.constants.touchMoveEvent,s);if(W.hasClass("ui-page")){W.find("img").unbind(DefaultMobile.constants.touchClick,D).bind(DefaultMobile.constants.touchClick,D);W.find("label").unbind(DefaultMobile.constants.touchClick,I).bind(DefaultMobile.constants.touchClick,I);W.find("input").unbind(DefaultMobile.constants.touchClick,H).bind(DefaultMobile.constants.touchClick,H);W.find("button").unbind(DefaultMobile.constants.touchClick,u).bind(DefaultMobile.constants.touchClick,u);W.find("select").unbind("change",O).bind("change",O);W.find("span.ui-btn").unbind(DefaultMobile.constants.touchClick,t).bind(DefaultMobile.constants.touchClick,t);W.find("a").unbind(DefaultMobile.constants.touchClick,K).bind(DefaultMobile.constants.touchClick,K).unbind(DefaultMobile.constants.touchStartEvent,B).bind(DefaultMobile.constants.touchStartEvent,B).unbind(DefaultMobile.constants.touchStopEvent,C).bind(DefaultMobile.constants.touchStopEvent,C);W.find(".ui-menu-accordion .ui-menu-item .ui-menu-item-title").unbind(DefaultMobile.constants.touchClick,J).bind(DefaultMobile.constants.touchClick,J)}else{if(W.hasClass("ui-dialog")){W.unbind(DefaultMobile.constants.touchStopEvent,v).bind(DefaultMobile.constants.touchStopEvent,v);W.find("a").unbind(DefaultMobile.constants.touchClick,K).bind(DefaultMobile.constants.touchClick,K).unbind(DefaultMobile.constants.touchStartEvent,B).bind(DefaultMobile.constants.touchStartEvent,B).unbind(DefaultMobile.constants.touchStopEvent,C).bind(DefaultMobile.constants.touchStopEvent,C)}}}TeamlabMobile.bind(TeamlabMobile.events.getException,y);TeamlabMobile.bind(TeamlabMobile.events.changePage,function(){jQuery(document).trigger("changepage")});TeamlabMobile.bind(TeamlabMobile.events.authPage,r);TeamlabMobile.bind(TeamlabMobile.events.indexPage,E);TeamlabMobile.bind(TeamlabMobile.events.rewritePage,M);TeamlabMobile.bind(TeamlabMobile.events.searchPage,N);TeamlabMobile.bind(TeamlabMobile.events.addComment,q);function Q(){a("div.ui-dialog-active").removeClass("ui-dialog-active");a("div.last-active-page").removeClass("last-active-page");b.removeClass("ui-mobile-rendering-page").addClass("ui-mobile-rendered-page")}c.bind(DefaultMobile.constants.touchStartEvent,function(W){}).bind(DefaultMobile.constants.touchClick,function(W){}).bind("startrenderdialog",function(W){}).bind("endrenderdialog",function(X,W,Y){j(W);DefaultMobile.resizeDialog(W)}).bind("changepage",function(W){a('input[type="datepick"]').scroller("hide");ASC.Controls.messages.hideAll();b.removeClass("ui-mobile-rendered-page").addClass("ui-mobile-rendering-page")}).bind("updatepage",function(X){b.removeClass("ui-mobile-rendering-page").addClass("ui-mobile-rendered-page");var W=a("div.ui-page-active:first");j(W);DefaultMobile.renderCustomSelects(W);DefaultMobile.renderCheckbox(W);var Y=W.find("div.ui-scroller:first").data("iScroll");if(Y){Y.refresh()}}).bind("startrenderpage",function(W){}).bind("endrenderpage",function(ab,Z,af){ASC.Controls.AnchorController.lazymove();j(Z);setTimeout(DefaultMobile.scrollToTop,1);DefaultMobile.renderVectorImages(Z);DefaultMobile.hideLoadingImg(Z);DefaultMobile.resizePage(Z);DefaultMobile.keyDownOnWkeInput(Z);DefaultMobile.renderCustomSelects(Z);DefaultMobile.renderCheckbox(Z);f=Z.find("div.ui-header:first");e=Z.find("div.ui-footer:first");var aa=Z.find("div.ui-scroller:first");setTimeout(Q,300);if(a.support.touch&&a.support.iscroll&&aa.length>0&&!aa.hasClass("none-iscroll")){var W=Z.find("div.ui-content:first"),Y=Z.find("div.ui-header:first"),X=Z.find("div.ui-footer:first");var ag={height:a.support.webapp?window.innerHeight-4:window.screen.availHeight-b.find("div.ui-header:first").height()+4,width:a.support.webapp?window.innerHeight+4:window.screen.availWidth-b.find("div.ui-header:first").height()+4};var ac=Math.abs(window.orientation)===90?ag.width-4:ag.height+4;ac=(Math.abs(window.orientation)===90?DefaultMobile.constants.screenMetrics.width:DefaultMobile.constants.screenMetrics.height)||ac;Z.addClass("ui-scroller").height(ac);W.height(ac-Y.outerHeight()-X.outerHeight()+4);if(aa.data("isScrolled")!==true){aa.data("isScrolled",true);var ad=new iScroll(W[0]);aa.data("iScroll",ad)}}if(a.support.touch&&a.support.fscroll){if(Z.find("div.ui-scroller:first").length>0){P()}}if(a.support.touch&&a.support.fscroll){R(aa)}Z.find("div.fckAscUser").userlink();var ae="";ae=a.platform.ios?"ios":ae;Z.find('input[type="datepick"]').scroller({theme:ae,setText:ASC.Resources.BtnSet,cancelText:ASC.Resources.BtnCancel,dayText:ASC.Resources.LblDay,monthText:ASC.Resources.LblMonth,yearText:ASC.Resources.LblYear,timeFormat:o(TeamlabMobile.dateFormats.time),dateFormat:o(TeamlabMobile.dateFormats.date),dayNamesShort:TeamlabMobile.nameCollections.shortdays,dayNames:TeamlabMobile.nameCollections.days,monthNamesShort:TeamlabMobile.nameCollections.shortmonths,monthNames:TeamlabMobile.nameCollections.months});switch(af){case"community-addblog-page":case"community-addforum-page":case"community-addbookmark-page":case"projects-addtask-page":case"projects-addmilestone-page":case"projects-adddiscussion-page":case"crm-addnote-page":break;default:TeamlabMobile.saveHistoryPage();break}switch(af){case"index-page":Z.find("input.top-search-field:first").val("").unbind("keyup").bind("keyup",G);Z.find("input.top-search-field:first").val("").parents("form.search-form:first").unbind("submit").bind("submit",F);break;case"search-page":Z.find("input.top-search-field:first").val("").unbind("keyup").bind("keyup",G);Z.find("input.top-search-field:first").parents("form.search-form:first").unbind("submit").bind("submit",F);break;case"people-page":Z.find("li.active-item").removeClass("active-item");Z.find("li.item-index").removeClass("uncorrect-item");Z.find("li.item-persone").removeClass("uncorrect-item");Z.find("input.top-search-field:first").val("").unbind("keyup").bind("keyup",DefaultMobile.filter_people_contacts);DefaultMobile.resizeFilterItems(Z.find("div.ui-navbar-people:first"));break;case"crm-page":Z.find("input.top-search-field:first").parents("form.search-form:first").unbind("submit").bind("submit",DefaultMobile.search_crm_contacts);break;case"people-item-page":case"community-blog-page":case"community-poll-page":case"community-forum-page":case"community-event-page":case"community-bookmark-page":case"projects-discussion-page":case"page-projects-milestone-tasks":Z.find("textarea.comment-content:first").unbind("keyup").bind("keyup",L);Z.find("textarea.comment-content:first").unbind("keypress").bind("keypress",w);break;case"community-addblog-page":Z.find("textarea.blog-description:first").unbind("keyup").bind("keyup",L);break;case"community-addforum-page":Z.find("textarea.forum-description:first").unbind("keyup").bind("keyup",L);break;case"community-addbookmark-page":Z.find("textarea.bookmark-description:first").unbind("keyup").bind("keyup",L);break;case"projects-addtask-page":Z.find("textarea.task-description:first").unbind("keyup").bind("keyup",L);break;case"documents-adddocument-page":Z.find("textarea.document-content:first").unbind("keyup").bind("keyup",L);break;case"projects-page":case"projects-tasks-page":case"projects-task-page":case"crm-task-page":case"crm-contacttasks-page":Z.find("textarea.comment-content:first").unbind("keyup").bind("keyup",L);break;case"crm-tasks-page":Z.find("input.top-search-field:first").parents("form.search-form:first").unbind("submit").bind("submit",DefaultMobile.search_crm_tasks);break;case"community-addcomment-page":Z.find("textarea:first").focus();break;case"documents-page":Z.find("li.active-item").removeClass("active-item");break;case"documents-item-page":DefaultMobile.resizeViewer(Z);break;case"documents-addfolder-page":Z.find("input.folder-title:first").unbind("keyup").bind("keyup",x);break}});g.bind("orientationchange",function(X){setTimeout(DefaultMobile.scrollToTop,1);setTimeout(DefaultMobile.setScreenMetrics,10);a("div.ui-dialog-active").removeClass("ui-dialog-active");if(a.support.touch){var W=a("div.ui-page-active:first");DefaultMobile.resizeBody(d);DefaultMobile.resizePage(W);DefaultMobile.resizePage();var Y=true;if(Math.abs(window.orientation)===90&&DefaultMobile.constants.screenMetrics.width!==null||Math.abs(window.orientation)!==90&&DefaultMobile.constants.screenMetrics.height!==null){Y=false}if(Y){setTimeout(DefaultMobile.resizeScroller,100)}else{DefaultMobile.resizeScroller()}if(a.support.fscroll){if(W.find("div.ui-scroller:first").length>0){P()}}}});a(function(){if(window.DISABLEDCOOKIES===true){return undefined}if(window.INVALIDCLIENT===true){return undefined}DefaultMobile.defaultResizeBody();setTimeout(DefaultMobile.scrollToTop,1000);setTimeout(DefaultMobile.setScreenMetrics,1100);setTimeout(function(){DefaultMobile.resizeBody();DefaultMobile.resizePage();if(a("div.ui-page-active:first").hasClass("page-auth")){a(".target-standart").unbind(DefaultMobile.constants.touchClick,A).bind(DefaultMobile.constants.touchClick,A);return undefined}jQuery(document.body).removeClass("ui-mobile-rendered-page").addClass("ui-mobile-rendering-page");var W={counter:0,handler:null};W.handler=setInterval((function(X){return function(){if(!window.applicationCache||++X.counter>100||window.applicationCache.status===0||window.applicationCache.status===1||window.applicationCache.status===4){clearInterval(X.handler);TeamlabMobile.preInit();return undefined}}})(W),100)},1500)})})(jQuery);